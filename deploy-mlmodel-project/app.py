from flask import Flask, request, render_template
import pickle

app = Flask(__name__)
model = pickle.load(open(r'C:\Users\johnp\deploy-mlmodel\MachineLearningWebApp\deploy-mlmodel-project\og_log_reg.pkl', 'rb'))

@app.route("/", methods = ['GET', 'POST'])
def home():
    
    teams = {'1838315' : 'Team Secret', 
             '2586976' : 'OG', 
             '2163'    : 'Team Liquid', 
             '7732977' : 'Boom Esports', 
             '15'      : 'PSG.LGD', 
             '7119388' : 'Team Spirit', 
             '8254400' : 'Beastcoast', 
             '6209166' : 'Team Aster', 
             '7391077' : 'Thunder Awaken', 
             '8260983' : 'TSM', 
             '8291895' : 'Tundra Esports', 
             '7390454' : 'Soniqs', 
             '8599101' : 'Gaimin Gladiators', 
             '39'      : 'Evil Geniuses', 
             '350190'  : 'Fnatic', 
             '8131728' : 'Hokori', 
             '8605863' : 'Entity', 
             '8721219' : 'BetBoom Team', 
             '6209804' : 'Royal Never Give Up', 
             '8597976' : 'Talon Esports'} 
    
    log_reg_precision = {'350190'  : 0.6310679611650486, 
                         '8254400' : 0.5882352941176471, 
                         '7732977' : 0.6990291262135923, 
                         '39'      : 0.6473988439306358, 
                         '8599101' : 0.5, 
                         '8131728' : 0.7301587301587301, 
                         '15'      : 0.6467889908256881, 
                         '7390454' : 0.6710526315789473, 
                         '8597976' : 0.7,  
                         '2163'    : 0.5548387096774193, 
                         '6209166' : 0.6379310344827587, 
                         '1838315' : 0.7070707070707071, 
                         '8291895' : 0.68, 
                         '8721219' : 0.6666666666666666, 
                         '8605863' : 0.7241379310344828, 
                         '2586976' : 0.7247191011235955, 
                         '7119388' : 0.6056338028169014, 
                         '7391077' : 0.7567567567567568, 
                         '8260983' : 0.7567567567567568, 
                         '6209804' : 0.5897435897435898}

    log_reg_recall = {'350190'  : 0.8057851239669421, 
                      '8254400' : 0.7407407407407407, 
                      '7732977' : 0.8571428571428571, 
                      '39'      : 0.8648648648648649, 
                      '8599101' : 0.6, 
                      '8131728' : 0.7666666666666667, 
                      '15'      : 0.8730650154798761, 
                      '7390454' : 0.9272727272727272, 
                      '8597976' : 0.7777777777777778,  
                      '2163'    : 0.8113207547169812, 
                      '6209166' : 0.6851851851851852, 
                      '1838315' : 0.967741935483871, 
                      '8291895' : 0.9444444444444444, 
                      '8721219' : 0.5555555555555556, 
                      '8605863' : 0.7241379310344828, 
                      '2586976' : 0.7371428571428571, 
                      '7119388' : 0.8431372549019608, 
                      '7391077' : 0.7567567567567568, 
                      '8260983' : 0.7567567567567568, 
                      '6209804' : 0.7419354838709677}
    
    predict_team_id = request.form.get('predict_team_names')
    opposing_team_id = request.form.get('opposing_team_names')

    print('predict_team_id', predict_team_id)
    print('opposing_team_id', opposing_team_id)

    return render_template('index.html', teams = teams)

if __name__ == "__main__":
    app.run()